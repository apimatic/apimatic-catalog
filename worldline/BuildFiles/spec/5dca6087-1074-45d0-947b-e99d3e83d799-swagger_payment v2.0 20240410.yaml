swagger: '2.0'
info:
  description: This is the API server supplied by equensWorldline.
  version: '2.0'
  title: Merchant payments - Payments API
  contact:
    name: equensWorldline Acquiring Processing API team.
    url: https://financial-services.developer.worldline.com/
    email: dl-fr-dp2si-acquiring@worldline.com
  license:
    name: proprietary Worldline Financial Services
basePath: /MerchantApiPayment/api
paths:
  /acquiring/payment/v2.0/acquirers/{acquirerId}/payments/{paymentId}:
    get:
      tags:
      - Payment
      summary: Get payment based on payment id
      description: |
        This operation uses the unique acquirerId and payment id to retrieve the payment data
      operationId: getPayment
      consumes:
      - application/json
      - '*/*'
      produces:
      - application/json
      parameters:
      - name: acquirerId
        in: path
        description: Unique identification of the acquirer, determined by equensWorldline
        required: true
        type: string
        example: "671234567"
      - name: paymentId
        in: path
        description: Unique identification of the payment in which this transac   tion has been paid out
        required: true
        type: string
        example: "SO-000000000004665998"
      - name: paymentDate
        in: query
        description: Payment Date (yyyy-mm-dd), known as payment posting date
        required: true
        type: string
        format: date
        example: "2019-03-14"
      responses:
        '200':
          description: Successful
          schema:
            $ref: '#/definitions/Payment'
        '400':
          description: Invalid input provided
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Resource not found
        '500':
          description: Unexpected error or Internal error
        '502':
          description: Backend service problem
  /acquiring/payment/v2.0/acquirers/{acquirerId}/payments:
    get:
      tags:
      - Payment
      summary: Retrieve payments on search criteria
      description: |
        This operation uses the unique acquirerId and IBAN or paymentReference to retrieve all the associated payment(s)

        If there is a previous and/or next page the http response header will have a link (url) to this data 
      operationId: getPaymentsForSearchCriteria
      consumes:
      - application/json
      - '*/*'
      produces:
      - application/json
      parameters:
      - name: acquirerId
        in: path
        description: Unique identification of the acquirer, determined by equensWorldline
        required: true
        type: string
        example: "671234567"
      - name: iban
        in: query
        description: |
          Iban
          
          paymentReference or Iban must be present
        required: false
        type: string
        example: "NL52RABO0133334252"
      - name: paymentReference
        in: query
        description: |
          Merchant payment identification information; a static number frequently used to indicate store location associated with a payment
          
          paymentReference or Iban must be present
        required: false
        type: string
        example: "4665998"
      - name: startDate
        in: query
        description: Payment start Date (yyyy-mm-dd)
        required: true
        type: string
        format: date
        example: "2019-03-01"
      - name: endDate
        in: query
        description: Payment end Date (yyyy-mm-dd)
        required: true
        type: string
        format: date
        example: "2019-12-31"
      - name: merchantPaymentAmountFrom
        in: query
        description: Payment amount (whole units), amount should be greater than or equal to this value
        required: false
        type: integer
        format: int32
      - name: merchantPaymentAmountTo
        in: query
        description: Payment amount (whole units), amount should be less than this value
        required: false
        type: integer
        format: int32
      - name: merchantPaymentAmountCurrency
        in: query
        description: Merchant payment amount currency, according to ISO 4217. Required if search amount is available. Example EUR
        required: false
        type: string
      - name: sortField
        in: query
        description: Sort field
        required: false
        type: string
        enum:
        - CreationDateTime
        - PaymentId
        - CreditorIban
        - DebtorIban
      - name: sortOrder
        in: query
        description: Sort order
        required: false
        type: string
        enum:
        - Ascending
        - Descending
      - name: pageSize
        in: query
        description: Page size (max 300)
        required: false
        type: string
      - name: pageNumber
        in: query
        description: Page number
        required: false
        type: string
      responses:
        '200':
          description: Successful
          schema:
            type: array
            items:
              $ref: '#/definitions/Payment'
        '400':
          description: Invalid input provided
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Resource not found
        '500':
          description: Unexpected error or Internal error
        '502':
          description: Backend service problem
  /acquiring/payment/v2.0/acquirers/{acquirerId}/holdings/{holdingId}/payments:
    get:
      tags:
      - Payment
      summary: Retrieve payments on holding level
      description: |
        This operation uses the unique acquirerId and holdingId to retrieve all the associated payment(s)

        If there is a previous and/or next page the http response header will have a link (url) to this data 
      operationId: getPaymentsForHolding
      consumes:
      - application/json
      - '*/*'
      produces:
      - application/json
      parameters:
      - name: acquirerId
        in: path
        description: Unique identification of the acquirer, determined by equensWorldline
        required: true
        type: string
        example: "671234567"
      - name: holdingId
        in: path
        description: Unique identification of the holding, determined by equensWorldline
        required: true
        type: integer
        format: int32
        example: 1
      - name: startDate
        in: query
        description: Payment start Date (yyyy-mm-dd)
        required: true
        type: string
        format: date
        example: "2019-03-01"
      - name: endDate
        in: query
        description: Payment end Date (yyyy-mm-dd)
        required: true
        type: string
        format: date
        example: "2019-12-31"
      - name: merchantPaymentAmountFrom
        in: query
        description: Payment amount (whole units), amount should be greater than or equal to this value
        required: false
        type: integer
        format: int32
      - name: merchantPaymentAmountTo
        in: query
        description: Payment amount (whole units), amount should be less than this value
        required: false
        type: integer
        format: int32
      - name: merchantPaymentAmountCurrency
        in: query
        description: Merchant payment amount currency, according to ISO 4217. Required if search amount is available. Example EUR
        required: false
        type: string
      - name: sortField
        in: query
        description: Sort field
        required: false
        type: string
        enum:
        - CreationDateTime
        - PaymentId
        - CreditorIban
        - DebtorIban
      - name: sortOrder
        in: query
        description: Sort order
        required: false
        type: string
        enum:
        - Ascending
        - Descending
      - name: pageSize
        in: query
        description: Page size (max 300)
        required: false
        type: string
      - name: pageNumber
        in: query
        description: Page number
        required: false
        type: string
      responses:
        '200':
          description: Successful
          schema:
            type: array
            items:
              $ref: '#/definitions/Payment'
        '400':
          description: Invalid input provided
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Resource not found
        '500':
          description: Unexpected error or Internal error
        '502':
          description: Backend service problem
  /acquiring/payment/v2.0/acquirers/{acquirerId}/merchants/{merchantId}/payments:
    get:
      tags:
      - Payment
      summary: Retrieve payments on merchant level
      description: |
        This operation uses the unique acquirerId and merchant id to retrieve all the associated payment(s)

        If there is a previous and/or next page the http response header will have a link (url) to this data 
      operationId: getPaymentsForMerchant
      consumes:
      - application/json
      - '*/*'
      produces:
      - application/json
      parameters:
      - name: acquirerId
        in: path
        description: Unique identification of the acquirer, determined by equensWorldline
        required: true
        type: string
        example: "671234567"
      - name: merchantId
        in: path
        description: Unique identification of the merchant, determined by equensWorldline
        required: true
        type: string
        example: "1100001" 
      - name: startDate
        in: query
        description: Payment start Date (yyyy-mm-dd)
        required: true
        type: string
        format: date
        example: "2019-03-01"
      - name: endDate
        in: query
        description: Payment end Date (yyyy-mm-dd)
        required: true
        type: string
        format: date
        example: "2019-12-31"
      - name: merchantPaymentAmountFrom
        in: query
        description: Payment amount (whole units), amount should be greater than or equal to this value
        required: false
        type: integer
        format: int32
      - name: merchantPaymentAmountTo
        in: query
        description: Payment amount (whole units), amount should be less than this value
        required: false
        type: integer
        format: int32
      - name: merchantPaymentAmountCurrency
        in: query
        description: Merchant payment amount currency, according to ISO 4217. Required if search amount is available. Example EUR
        required: false
        type: string
      - name: sortField
        in: query
        description: Sort field
        required: false
        type: string
        enum:
        - CreationDateTime
        - PaymentId
        - CreditorIban
        - DebtorIban
      - name: sortOrder
        in: query
        description: Sort order
        required: false
        type: string
        enum:
        - Ascending
        - Descending
      - name: pageSize
        in: query
        description: Page size (max 300)
        required: false
        type: string
      - name: pageNumber
        in: query
        description: Page number
        required: false
        type: string
      responses:
        '200':
          description: Successful
          schema:
            type: array
            items:
              $ref: '#/definitions/Payment'
        '400':
          description: Invalid input provided
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Resource not found
        '500':
          description: Unexpected error or Internal error
        '502':
          description: Backend service problem
  /acquiring/payment/v2.0/acquirers/{acquirerId}/contracts/{contractId}/payments:
    get:
      tags:
      - Payment
      summary: Retrieve payments on contract level
      description: |
        This operation uses the unique acquirerId and contractId to retrieve all the associated payment(s)

        If there is a previous and/or next page the http response header will have a link (url) to this data 
      operationId: getPaymentsForContract
      consumes:
      - application/json
      - '*/*'
      produces:
      - application/json
      parameters:
      - name: acquirerId
        in: path
        description: Unique identification of the acquirer, determined by equensWorldline
        required: true
        type: string
        example: "671234567"
      - name: contractId
        in: path
        description: Unique identification of the contract, determined by the acquirer
        required: true
        type: string
        example: "1000016"
      - name: startDate
        in: query
        description: Payment start Date (yyyy-mm-dd)
        required: true
        type: string
        format: date
        example: "2019-03-01"
      - name: endDate
        in: query
        description: Payment end Date (yyyy-mm-dd)
        required: true
        type: string
        format: date
        example: "2019-12-31"
      - name: merchantPaymentAmountFrom
        in: query
        description: Payment amount (whole units), amount should be greater than or equal to this value
        required: false
        type: integer
        format: int32
      - name: merchantPaymentAmountTo
        in: query
        description: Payment amount (whole units), amount should be less than this value
        required: false
        type: integer
        format: int32
      - name: merchantPaymentAmountCurrency
        in: query
        description: Merchant payment amount currency, according to ISO 4217. Required if search amount is available. Example EUR
        required: false
        type: string
      - name: sortField
        in: query
        description: Sort field
        required: false
        type: string
        enum:
        - CreationDateTime
        - PaymentId
        - CreditorIban
        - DebtorIban
      - name: sortOrder
        in: query
        description: Sort order
        required: false
        type: string
        enum:
        - Ascending
        - Descending
      - name: pageSize
        in: query
        description: Page size (max 300)
        required: false
        type: string
      - name: pageNumber
        in: query
        description: Page number
        required: false
        type: string
      responses:
        '200':
          description: Successful
          schema:
            type: array
            items:
              $ref: '#/definitions/Payment'
        '400':
          description: Invalid input provided
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Resource not found
        '500':
          description: Unexpected error or Internal error
        '502':
          description: Backend service problem
################################################################################
#                                 Definitions                                  #
################################################################################
definitions:
  Payment:
    type: object
    properties:
      paymentIdentification:
        $ref: '#/definitions/PaymentIdentification'
      contractIdentification:
        $ref: '#/definitions/ContractIdentification'
      brand:
        type: string
        description: Unique identification of the brand (payment product). Maestro MAES, Visa VISA, etc.
        example: "MAES"
      creationDateTime:
        type: string
        format: date-time
        description: Creation datetime payment (yyyy-mm-dd hh:mm:ss)
        example: 2017-05-01 09:30:47
      creditorName:
        type: string
        description: Name of the creditor
        example: Bank of Money
      creditorIban:
        type: string
        description: International Bank Account Number for merchant payment creditor
        example: NL98INGB0691132083
      creditorBic:
        type: string
        description: Code of the bank identification code for merchant payment creditor
        example: INGBNL2A
      csmCode:
        type: string
        description: Code to identify the CSM
        example: 0
      dateMandateSignature:
        type: string
        format: date
        description: Date of signature of the mandate (yyyy-mm-dd)
        example: 2017-05-01
      debtorBic:
        type: string
        description: Code of the bank identification code for merchant payment debtor
        example: INGBNL2A
      debtorIban:
        type: string
        description: International Bank Account Number for merchant payment debtor
        example: NL98INGB0691132083
      debtorId:
        type: string
        description: Identification of the debtor
        example: Debtor ID
      debtorName:
        type: string
        description: Name of the debtor
        example: Flowshop Utrecht
      indicatorSctSdd:
        type: string
        description: Indicator SCT or SDD. C = SCT. D = SDD
        example: D
      mandateId:
        type: string
        description: Identification of Sepa Direct Debit mandate
        example: Sepa Direct Debit mandate ID
      merchantLanguage:
        type: string
        description: Language merchant
        example: Dutch
      merchantLanguageCode:
        type: string
        description: Language codes according to the ISO 639-2 standard
        example: 528
      merchantPaymentAggregationLevelCode:
        type: string
        description: Code for the merchant payment aggregation. (00=no aggregation, 01=cluster/holding, 02=contract, 03=site, 04=terminal, 05=imprinter)
        example: 02
      merchantPaymentAggregationId:
        type: string
        description: Identification of the level on which the payment is aggregated on. The level is determined by the ‘Merchant payment aggregation code’.
        example: 2001657854
      merchantPaymentDescription:
        type: string
        description: Description of the merchant payment
        example: ISP SE WWW.ISP.EU    2001657854     / 020216          Ref    2530776666/              Bruto    1740,70 /com      21,90
      merchantPaymentPeriod:
        type: string
        description: Merchant payment periode. 201933 (week), 20190814 (day), etc
        example: 201933
      merchantPaymentPeriodTypeCode:
        type: string
        description: Code to identify the merchant payment periode. (00=no period, 01=day, 02=week, 03=month, 04=year, 05=bi monthly.. etc)
        example: 02
      merchantPaymentType:
        type: string
        description: Type of merchant payment
        example: 03
      merchantReconciliationReference:
        type: string
        description: Reference the merchant wants to be part of the description lines of the payment on his bank statement
        example: ISP reference
      requiredProcessingDateTime:
        type: string
        format: date-time
        description: Date and time merchant payment requested processing (yyyy-mm-dd hh:mm:ss)
        example: 2017-05-01 09:30:47
      sddTypeCode:
        type: string
        description: Type of Sepa Direct Debit (001=CORE, 002=COR1, 003=B2B)
        example: 001
      sequenceTypeCode:
        type: string
        description: Type of sequence used for SDD (0001=FNAL, 0002=FRST, 0003=OOFF, 0004=RCUR)
        example: 0001
      transactionCrossReferenceURI:
        type: string
        description: URI to the MerchantApiTransaction to get the transactions that belongs to this payment
        example: "acquiring/transaction/v2.0/acquirers/XXX/transactions?paymentId=XXX&paymentDate=YYYY-MM-DD"
      transactionsTotalNumber:
        type: integer
        format: int32
        description: Total number of transaction in this payment
        example: 519
      merchantPaymentAmount:
        $ref: '#/definitions/Amount'
      transactionsTotalAmount:
        $ref: '#/definitions/Amount'
      transactionVatsTotalAmount:
        $ref: '#/definitions/Amount'
      transactionFeesTotalAmount:
        $ref: '#/definitions/Amount'
      serviceBasedFeesTotalAmount:
        $ref: '#/definitions/Amount'
  PaymentIdentification:
    type: object
    properties:
      paymentId:
        type: string
        description: Unique identification of the payment in which this transaction has been paid out
        example: "SO-000000017036619028"
      paymentReference:
        type: string
        description: Merchant payment identification information
        example: 12530776666
  ContractIdentification:
    type: object
    properties:
      acquirerId:
        type: string
        description: Unique identification of the acquirer, determined by equensWorldline
        example: "671234567"
      holdingId:
        type: integer
        format: int32
        description: Unique identification of the merchant hierarchy, determined by equensWorldline
        example: 200
      merchantId:
        type: string
        description: Unique identification of the merchant, determined by the acquirer
        example: "1280300"
      contractId:
        type: string
        description: Unique identification of the contract, determined by the acquirer
        example: "12872"
  Amount:
    type: object
    properties:
      amount:
        type: string
        format: unlimited size decimal
        description: |
          Amount in the major units of the currency according to ISO 4217.
          
          In case of euro, "3.10" (is 3.10 euro)
        example: "3.00"
      currency:
        type: string
        description: Currency of the amount
        example: "EUR"
{"openapi":"3.0.0","info":{"title":"API de Reembolsos","description":"Especificación de la API de Reembolsos de Clip","contact":{"name":"Centro de soporte a desarrolladores de Clip","email":"developers@payclip.com"},"license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"},"version":"1.0.0"},"x-explorer-enabled":true,"x-samples-enabled":true,"x-proxy-enabled":true,"servers":[{"url":"https://api.payclip.com/","description":"Ambiente de producción"}],"paths":{"/refunds":{"post":{"summary":"Solicitar el reembolso de una transacción","description":"Solicita el reembolso total (versión beta) de un pago completado.","operationId":"CreateRefund","security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"header","name":"idempotency-key","schema":{"type":"string","description":"Valor único que puedes definir y utilizar para identificar subsecuentes intentos de reembolso de una misma transacción."}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"amount":{"description":"Número con decimales de la cantidad a ser reembolsada. Debe ser igual al monto de la transacción original (versión beta).<br> Este parámetro es opcional.","type":"number","format":"float","example":80.5},"reason":{"description":"Razón por la cual se solicita el reembolso. Este parámetro es opcional.","type":"string","maxLength":100,"format":"utf-8","example":"Articulo defectuoso"},"reference":{"description":"Objeto que detalla el número y tipo de referencia de la transacción original a ser reembolsada.","type":"object","required":["id","type"],"properties":{"type":{"description":"Tipo de identificación con el que se hace referencia a la transacción original. Puede ser **transaction** o **receipt**.","type":"string","enum":["transaction","receipt"]},"id":{"description":"Número de identificación de la transacción a ser reembolsada","type":"string","format":"uuid","example":"418f62c5-ce88-4d94-a96d-73d484912463"}}}}}}}},"responses":{"201":{"description":"OK.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/success"}}}},"400":{"description":"Bad request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/error"},"examples":{"Bad-request-1":{"value":{"message":"Bad request","code_message":"CL2200","detail":"Unable to process the request. Required fields are missing."}}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/error"},"examples":{"Conflict-1":{"value":{"message":"Conflict","code_message":"AI1801","detail":"The refund amount is greater that the original"}},"Conflict-2":{"value":{"message":"Conflict","code_message":"AI1802","detail":"The refund amount, plus previous refunds, is greater than the original amount."}},"Conflict-3":{"value":{"message":"Conflict","code_message":"AI1803","detail":"The refund date has expired."}},"Conflict-4":{"value":{"message":"Conflict","code_message":"AI1804","detail":"Refund declined."}},"Conflict-5":{"value":{"message":"Conflict","code_message":"AI1805","detail":"Refunds are disabled."}},"Conflict-6":{"value":{"message":"Conflict","code_message":"AI1806","detail":"Refund is disabled for payments with MSI and MCI."}},"Conflict-7":{"value":{"message":"Conflict","code_message":"AI1807","detail":"Refund in process for this transaction. Please try again later."}},"Conflict-8":{"value":{"message":"Conflict","code_message":"AI1400","detail":"Insufficient funds to make the refund."}}}}}}}}},"/refunds/{id}":{"get":{"summary":"Consultar la información de un reembolso","description":"Consulta información detallada de un reembolso.","operationId":"GetRefund","security":[{"ApiKeyAuth":[]}],"parameters":[{"name":"id","in":"path","description":"Número de identificación de la transacción del reembolso. <br/> Este _id_ es generado en la respuesta del endpoint [Solicitar el reembolso de una transacción](https://developer.clip.mx/reference/createrefund).","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK. Solicitud aprobada.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/success"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/error"},"examples":{"Not-found-1":{"value":{"message":"Not found","code_message":"AI1300","detail":"Transaction ID not found."}},"Not-found-2":{"value":{"message":"Not found","code_message":"CL301","detail":"Payment not found."}},"Not-found-3":{"value":{"message":"Not found","code_message":"AI800","detail":"The payment is not approved."}}}}}}}}}},"security":[{"ApiKeyAuth":[]}],"components":{"securitySchemes":{"ApiKeyAuth":{"type":"apiKey","in":"header","name":"Authorization"}},"schemas":{"success":{"type":"object","properties":{"id":{"description":"Número de identificación de la transacción de reembolso.","type":"string","format":"uuid","example":"e768d734-7b8c-4955-8f4c-b4419a50571a"},"status":{"description":"Estado de la solicitud de reembolso. Puede ser **approved** o **declined**","type":"string","example":"approved"},"status_message":{"description":"Mensaje con detalles del estado de la solicitud.","type":"string","example":"Refunded. Merchant initiated."},"amount":{"description":"Número con decimales de la cantidad a ser reembolsada.","type":"number","format":"float","example":80.5},"receipt_no":{"description":"Número de recibo del reembolso. Se mostrará en el evoucher de la transacción.","type":"string","example":"mdC8YPB"},"created_at":{"description":"Fecha de cración de la transacción de reembolso.","type":"string","example":"Refunded","format":"YYYY-MM-DDTHH-MM-SSZ"},"currency":{"description":"Código de tres letras que especifica el tipo de moneda. Sólo se acepta pesos mexicanos (MXN).","type":"string","default":"MXN"},"reference":{"description":"Objeto que detalla el número y tipo de referencia de la transacción original a ser reembolsada.","type":"object","required":["type","id"],"properties":{"type":{"description":"Tipo de identificación con el que se hace referencia a la transacción original. Puede ser **transaction**, **payment** o **receipt**.","type":"string","enum":["transaction"]},"id":{"description":"Número de identificación de la transacción a ser reembolsada","type":"string","format":"uuid","example":"418f62c5-ce88-4d94-a96d-73d484912463"}}},"reason":{"description":"Motivo del reembolso.","type":"string","example":"Artículo defectuoso.","maxLength":100,"format":"utf-8"}}},"error":{"description":"Objeto de error.","type":"object","properties":{"message":{"description":"Mensaje que detalla el error","type":"string"},"code_message":{"description":"Número del mensaje de error.","type":"string"},"detail":{"description":"Información detallada del error.","type":"string"}}}}}}